$(document).ready(function(){$.ajax("/api/airports",{dataType:"json",success:function(e,a,o){$.each(e,function(e,a){$("#from_arpt").append($("<option>",{value:a.CountryCode+a.Code,text:a.Name})),$("#to_arpt").append($("<option>",{value:a.CountryCode+a.Code,text:a.Name}))})},error:function(e,a,o){console.log(o)}});const e="<span class='glyphicon glyphicon-lock'></span>";var a={P:"The Residence",RAF:"First Freedom",DCJ:"Business Freedom",W:"Business Saver",Z:"Business Breaking Deals",HBY:"Economy Freedom",LQMK:"Economy Classic",UV:"Economy Saver",TE:"Economy Deal",N:"Guest Economy",I:"Guest Business",O:"Guest First"};$.each(a,function(e,a){$("#rbd").append($("<option>",{value:e,text:a}))}),$("#allowbutton").click(function(){var e=$("#from_arpt option:selected").val(),a=$("#to_arpt option:selected").val(),o=$("#rbd option:selected").val().substring(0,1),t="/api/bagallowance/"+e+"/"+a+"/"+o;$("#allowpanel").empty(),$("#allowpanel").show(),$.ajax(t,{dataType:"json",success:function(e,a,o){var t=e.BaseAllowanceResponse.totalpieces,n=e.BaseAllowanceResponse.weightunit,s=e.BaseAllowanceResponse.weight,l="";if(""==t&&""==s)l="No Baggage allowance provided for this route";else switch(t){case"No":l="No Free Baggage allowance for this Route + Fare Class Combination";break;case"0":l="Total Allowance  of  <span class='badge'>"+s+" "+n+" </span>";break;default:l="Check In Baggage Allowance :  <span class='badge'>"+t+" </span> Piece(s) of each "+s+" "+n}$("#allowpanel").append(l),$("#ratebutton").show()},error:function(e,a,o){$("#allowpanel").append("A Server error occured. Please retry later !"),console.log(o)}})}),$("#ratebutton").click(function(){var a=$("#from_arpt option:selected").val(),o=$("#to_arpt option:selected").val(),t=$("#rbd option:selected").val().substring(0,1),n="/api/xsbagrates/"+a+"/"+o+"/"+t;$("#allowpanel").empty(),$("#allowpanel").show(),$.ajax(n,{dataType:"json",success:function(a,o,t){var n="",s=!1;$.each(a,function(o,t){"costunit"!=o&&""!=t&&(n=n+e+" "+o+" : "+a.costunit+" "+t+"<br>"),"Weight Concept"==t&&(s=!0)}),""==n&&(n="No excess baggage rules defined for this route"),s&&(n="Weight concept market, please wait for rates..",$.fn.getConceptRates()),$("#allowpanel").append(n)},error:function(e,a,o){$("#allowpanel").append("A Server error occured. Please retry later !"),console.log(o)}})}),$.fn.getConceptRates=function(){var a=$("#from_arpt option:selected").val(),o=$("#to_arpt option:selected").val(),t=$("#rbd option:selected").val().substring(0,1),n="/api/wtcptbagrates/"+a+"/"+o+"/"+t;$.ajax(n,{dataType:"json",success:function(a,o,t){var n="";$.each(a,function(a,o){"costunit"!=a&&""!=o&&(n=n+e+" "+a+" : USD "+o+"<br>")}),""==n&&(n="No excess baggage rules defined for this route"),$("#allowpanel").empty(),$("#allowpanel").show(),$("#allowpanel").append(n)},error:function(e,a,o){$("#allowpanel").append("A Server error occured. Please retry later !"),console.log(o)}})}});